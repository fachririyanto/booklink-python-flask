{% extends "base.html" %}

{% block page_title %}
    {{ args['page_title'] }} - {{ args['app_name'] }}
{% endblock %}

{% block main_content %}
    {% from '_parts.html' import block_header, alert %}

    {{ block_header(args['app_name'], 'edit-profile') }}

    <section class="block-links py-20">
        <div class="container mx-auto px-4">
            <div class="mx-auto max-w-xl">
                <h1 class="mb-12 text-2xl font-medium">Edit Profile</h1>
                {% if args['message'] != '' and args['message_category'] != '' and args['save_button'] == 'save_profile' %}
                    <div class="-mt-2 mb-8">
                        {{ alert(args['message'], args['message_category']) }}
                    </div>
                {% endif %}
                <form action="/edit-profile" method="post">
                    <div class="mb-8">
                        <label class="block">
                            <span class="text-gray-500">Email</span>
                            <input type="email" name="email" value="{{ args['current_user'][0] }}" class="mt-0 block w-full py-1 px-0 border-0 ring-0 outline-0 border-b-2 border-gray-200 focus:ring-0 focus:border-black" required />
                            <input type="hidden" name="old_email" value="{{ args['current_user'][0] }}" />
                        </label>
                    </div>
                    <div class="mb-8">
                        <label class="block">
                            <span class="text-gray-500">Full Name</span>
                            <input type="text" name="fullname" value="{{ args['current_user'][1] }}" class="mt-0 block w-full py-1 px-0 border-0 ring-0 outline-0 border-b-2 border-gray-200 focus:ring-0 focus:border-black" required />
                        </label>
                    </div>
                    <div class="text-right">
                        <button type="submit" name="save_button" value="save_profile" class="bg-black hover:bg-black text-white font-bold py-3 px-5 rounded focus:outline-none focus:shadow-outline">
                            Update Profile
                        </button>
                    </div>
                </form>

                <div class="my-20 h-px bg-gray-100"></div>

                <h1 class="mb-12 text-2xl font-medium">Change Password</h1>
                {% if args['message'] != '' and args['message_category'] != '' and args['save_button'] == 'save_new_password' %}
                    <div class="-mt-2 mb-8">
                        {{ alert(args['message'], args['message_category']) }}
                    </div>
                {% endif %}
                <form action="/edit-profile" method="post">
                    <div class="mb-8">
                        <label class="block">
                            <span class="text-gray-500">Old Password</span>
                            <input type="password" name="old_password" class="mt-0 block w-full py-1 px-0 border-0 ring-0 outline-0 border-b-2 border-gray-200 focus:ring-0 focus:border-black" required />
                        </label>
                    </div>
                    <div class="mb-8">
                        <label class="block">
                            <span class="text-gray-500">New Password</span>
                            <input type="password" name="new_password" class="mt-0 block w-full py-1 px-0 border-0 ring-0 outline-0 border-b-2 border-gray-200 focus:ring-0 focus:border-black" required />
                        </label>
                    </div>
                    <div class="mb-8">
                        <label class="block">
                            <span class="text-gray-500">Confirm New Password</span>
                            <input type="password" name="confirm_password" class="mt-0 block w-full py-1 px-0 border-0 ring-0 outline-0 border-b-2 border-gray-200 focus:ring-0 focus:border-black" required />
                        </label>
                    </div>
                    <div class="text-right">
                        <button type="submit" name="save_button" value="save_new_password" class="bg-black hover:bg-black text-white font-bold py-3 px-5 rounded focus:outline-none focus:shadow-outline">
                            Update Password
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>
{% endblock %}
